<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>112 - Studiogeist</title>
    <link rel="apple-touch-icon" sizes="180x180" href="general-assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="general-assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="general-assets/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
    <style>
        #logo-container {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .svg-container {
        }
        object {
            width: auto;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="logo-container">
        <!-- SVG placeholders will be added here -->
    </div>
    <button onclick="generateLogo()">Generate</button>
    <button onclick="exportSVG()">Export SVG</button>
    <button onclick="exportPNG()">Export PNG</button>

    <script>
        const logoContainer = document.getElementById('logo-container');
        const svgFiles = [
            '1-SMALL-V1.svg',
            '1-MEDIUM-V6.svg',
            '1-MEDIUM-V5.svg',
            '1-MEDIUM-V4.svg',
            '1-MEDIUM-V3.svg',
            '1-MEDIUM-V2.svg',
            '1-MEDIUM-V1.svg',
            '1-LARGE-V1.svg',
            '2-MEDIUM-V2.svg',
            '2-MEDIUM-V1.svg',
            '2-LARGE-V6.svg',
            '2-LARGE-V5.svg',
            '2-LARGE-V4.svg',
            '2-LARGE-V3.svg',
            '2-LARGE-V2.svg',
            '2-LARGE-V1.svg'
        ];

        let currentLogo = ['', '', ''];

        function getRandomSVG(startingWith) {
            const filteredFiles = svgFiles.filter(file => file.startsWith(startingWith));
            return filteredFiles[Math.floor(Math.random() * filteredFiles.length)];
        }

        function generateLogo() {
            currentLogo[0] = getRandomSVG('1');
            currentLogo[1] = getRandomSVG('1');
            while (currentLogo[1] === currentLogo[0]) {
                currentLogo[1] = getRandomSVG('1');
            }
            currentLogo[2] = getRandomSVG('2');

            displayLogo();
        }

        function displayLogo() {
            // Clear previous SVGs
            logoContainer.innerHTML = '';

            currentLogo.forEach((svgFile) => {
                const svgContainer = document.createElement('div');
                svgContainer.className = 'svg-container';
                const svgElement = document.createElement('object');
                svgElement.data = 'assets/' + svgFile;
                svgElement.type = 'image/svg+xml';
                svgContainer.appendChild(svgElement);
                logoContainer.appendChild(svgContainer);
            });
        }

// Function to export SVG
function exportSVG() {
    // Select all elements with the class 'svg-container' within the 'logoContainer'
    const svgContainers = Array.from(logoContainer.querySelectorAll('.svg-container'));

    // Calculate the total width of the resulting SVG
    const svgWidth = svgContainers.length * 100 + (svgContainers.length - 1) * 5; // Assuming each container has a width of 100 units and a gap of 5 units

    // Map each SVG container to its transformed content
    const svgElements = svgContainers.map((svgContainer, index) => {
        // Extract the inner HTML content of the SVG from the 'object' element inside each 'svg-container'
        const svgContent = svgContainer.querySelector('object').contentDocument.documentElement.innerHTML;
        // Calculate the horizontal translation for each SVG container
        const translationX = index * (100 + 5); // Assuming each container has a width of 100 units and a gap of 5 units
        // Create a group element with a transform attribute to position each SVG horizontally
        return `<g transform="translate(${translationX}, 0)">${svgContent}</g>`;
    }).join('\n'); // Join the array of SVG elements into a single string with line breaks

    // Concatenate the SVG elements into a complete SVG document
    const concatenatedSVG = `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 ${svgWidth} 75" preserveAspectRatio="xMinYMin meet">
            ${svgElements}
        </svg>`;

    // Create a Blob containing the SVG data
    const blob = new Blob([concatenatedSVG], { type: 'image/svg+xml' });
    // Create a URL for the Blob
    const url = URL.createObjectURL(blob);

    // Create a link element
    const a = document.createElement('a');
    // Set the link's href attribute to the SVG URL
    a.href = url;
    // Set the download attribute to specify the default file name
    a.download = '112-din-logovariant.svg';
    // Append the link to the document body
    document.body.appendChild(a);
    // Simulate a click on the link to trigger the download
    a.click();
    // Remove the link element from the document body
    document.body.removeChild(a);
    // Revoke the URL to free up resources
    URL.revokeObjectURL(url);
}














        function exportPNG() {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            const images = currentLogo.map(svgFile => new Image());
            
            // Load each SVG as an image
            Promise.all(currentLogo.map((svgFile, index) => {
                return new Promise(resolve => {
                    images[index].onload = () => resolve();
                    images[index].src = 'assets/' + svgFile;
                });
            })).then(() => {
                canvas.width = images.reduce((width, image) => Math.max(width, image.width), 0);
                canvas.height = images.reduce((height, image) => height + image.height, 0);

                let yOffset = 0;
                images.forEach(image => {
                    context.drawImage(image, 0, yOffset);
                    yOffset += image.height;
                });

                const url = canvas.toDataURL('image/png');

                const a = document.createElement('a');
                a.href = url;
                a.download = 'logo.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            });
        }

        // Initial generation
        generateLogo();
    </script>
</body>
</html>
